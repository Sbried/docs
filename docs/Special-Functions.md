There are some entities mapped in mqtt that are generated by ems-esp and not read from the bus.
`heating_active` and `tapwater_active` are calculated from burner and valve/pump settings. These are used by shower timer and energy measurement.

## Shower Timer

Measures the time hot water is running with burner on. This works only for dhw flow systems, in buffered dhw systems the time is always the chargetime of the buffer.
As additional feature there is the shower alert, that alerts and triggers a cold shot after a configured time. The coldshot is managed by the entity `boiler/tapactivated`, a special function that sets the boiler in testmode, enables tapwater flow, but disables the burner.

## Force Heating Off

Some users controls the boiler without thermostat and want to switch the boiler off if the desired temperature is reached. Sending `boiler/selflowtemp 0` to the boiler has to be repeated every minute, otherwise the boiler fall back to selected temperature on the panel.
The function `boiler/forceheatingoff` repeats the command every minute, so heating stays off. In the settings it is possible to set the poweron-value of `forceheatingoff`

## Energy Measurement

For gas and oil burners Bosch do not measure the energy consumption. Ems-esp calculates on each boiler message the consumption by burner modulation and nominal boiler power. Some gas-boilers have the nominal power stored, some not. 
Also the stored power is not always right, boiler of same type could be equipt with different burners or burners could be adjusted by air/nozzle size.
For these cases the nominal power `boiler/nompower` can be changed and stored in ems-esp. Check the setting before using the energy values.

## Remote Thermostats

Modern thermostats are mainly use outdoor temperature to calculate the flowtemp. This can be done for different heating circuits with a single thermostat placed on the boiler. This type of control is slow. 
If you change the wanted roomtemperture the thermostat calculates the flowtemp to reach and hold this temperature.
A room thermostat could measure that the actual temperture is much lower and raise the flowtemp much higher until the temperature is reached.
This is called outdoorcontrolled with room influence and needs a remote thermostat in the room. In `thermostat/hcx/control` the remote has to be set.

Ems-esp can emulate a remote thermostat and send a temperature as measured roomtemperature to the master-thermostat.
The original remote thermostats can also change the dhw settings, the setpoint, etc., in ems-esp this could set on the master.
With `thermostat/hcx/remotetemp` and a valid temperature the function is started. Ems-esp now sends the value with origin of a remote roomthermostat.
For masterthermostat RC30/RC35 a RC20 is emulated, for RC3x0/BC400 you have to choose the control first to RC200 or RC100H, ems-esp emulates the selected roomthermostat.
For Junkers/Bosch FW120 and similar a FB10 is emulated and has to be selected for emulation.

To activate the function do:
- set `thermostat/hcx/control` to the right Remote
- send `thermostat/hcx/remotetemp` with your measured temperature
- for RC100H send `thermostat/hcx/remotehum` with value
- ems-esp will find a new thermostat with entities for roomtemperature and humidiy
- update the remote values on change, there is no need for periodic sending, this is done by ems-esp

to stop the function
- send `thermostat/hcx/remotetemp` with value `-1`
- set `thermostat/hcx/control` to the masterthermostst (RC35/RC300/FW120, etc.)
- the remote thermostat in the ems-esp device list stay, but without entities

If the control is set to roomthermostat and the first remotetemp is not set withing a minute, the master will show an error message.
